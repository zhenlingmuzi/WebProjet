{"version":3,"sources":["users-tests.js"],"names":["request","require","app","DB","getUsers","getUserOne","postUser","deleteUser","putUser","sql","serial","t","accessor","query","then","get","res","is","status","deepEqual","body","result","catch","error","parameters","id","post","send","delete","put"],"mappings":"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","file":"users-tests.js","sourcesContent":["import test from 'ava';\r\nconst request = require('supertest');\r\nconst app = require('../app');\r\nconst DB = require('../models/Database');\r\n\r\n// The awaited results\r\nconst getUsers = require('./results/users/get-users.json');\r\nconst getUserOne = require('./results/users/get-users-1.json');\r\nconst postUser = require('./results/users/post-users.json');\r\nconst deleteUser = require('./results/users/delete-users-1.json');\r\nconst putUser = require('./results/users/put-users-1.json');\r\nconst sql = DB.sql('../dumps/test-data.sql');\r\n\r\ntest.serial('Users - GET - Get all users', t => {\r\n  DB.accessor.query(sql)\r\n    .then(() => {\r\n      return request(app)\r\n        .get('/users')\r\n        .then((res) => {\r\n          t.is(res.status, 200);\r\n          t.deepEqual(res.body, getUsers.result);\r\n        })\r\n    })\r\n    .catch((error) => {\r\n      throw error;\r\n    });\r\n});\r\n\r\ntest.serial('Users - GET - Get user id ' + getUserOne.parameters.id, t => {\r\n  DB.accessor.query(sql)\r\n    .then(() => {\r\n      return request(app)\r\n        .get('/users/' + getUserOne.parameters.id)\r\n        .then((res) => {\r\n          t.is(res.status, 200);\r\n          t.deepEqual(res.body, getUserOne.result);\r\n        })\r\n    })\r\n    .catch((error) => {\r\n      throw error;\r\n    });\r\n});\r\n\r\ntest.serial('Users - POST - Create User', t => {\r\n  DB.accessor.query(sql)\r\n    .then(() => {\r\n      return request(app)\r\n        .post('/users/')\r\n        .send(postUser.body)\r\n        .then((res) => {\r\n          t.is(res.status, 200);\r\n          t.deepEqual(res.body, postUser.result);\r\n        })\r\n    })\r\n    .catch((error) => {\r\n      throw error;\r\n    })\r\n});\r\n\r\ntest.serial('Users - DELETE - Delete User with id ' + deleteUser.parameters.id, t => {\r\n  DB.accessor.query(sql)\r\n    .then(() => {\r\n      return request(app)\r\n        .delete('/users/' + deleteUser.parameters.id)\r\n        .then((res) => {\r\n          t.is(res.status, 200);\r\n          t.deepEqual(res.body, deleteUser.result);\r\n        })\r\n    })\r\n    .catch((error) => {\r\n      throw error;\r\n    });\r\n});\r\n\r\ntest.serial('Users - PUT - Update User with id ' + putUser.parameters.id, t => {\r\n  DB.accessor.query(sql)\r\n    .then(() => {\r\n      return request(app)\r\n        .put('/users/' + putUser.parameters.id)\r\n        .send(putUser.body)\r\n        .then((res) => {\r\n          t.is(res.status, 200);\r\n          t.deepEqual(res.body, deleteUser.result);\r\n        })\r\n    })\r\n    .catch((error) => {\r\n      throw error;\r\n    });\r\n});"]}